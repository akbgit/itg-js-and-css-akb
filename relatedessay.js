function relatedPostsWidget(t){!function(e){var i={blogURL:"",maxPosts:10,maxTags:10,maxPostsPerTag:5,containerSelector:"",tags:null,loadingText:"",loadingClass:"",relevantTip:"",relatedTitle:"<h1>You may also Like These !</h1>",recentTitle:"Recent Topics",postScoreClass:"",onLoad:!1};i=e.extend({},i,t);var n=0,a=null,o=null;i.containerSelector||(document.write('<div id="related-posts"></div>'),i.containerSelector="#related-posts");var r=function(t){if(n++,t.feed.entry)for(var r=0;r<t.feed.entry.length;r++){for(var c=t.feed.entry[r],l="",d=0;d<c.link.length;d++)if("alternate"==c.link[d].rel){l=c.link[d].href;break}var h=c.title.$t;location.href.toLowerCase()!=l.toLowerCase()&&s(l,h)}n>=i.tags.length&&(o.attr("class",""),e("#related-posts-loadingtext",a).remove(),i.maxPosts>0&&e("li:gt("+(i.maxPosts-1)+")",o).remove())},s=function(t,n){for(var a=e("li",o),r=0;r<a.length;r++){var s=e("a",a.eq(r)),d=c(s);if(s.attr("href")==t){l(s,++d);for(var h=r-1;h>=0;h--){var u=e("a",a.eq(h));if(c(u)>d)return r-h>1&&a.eq(h).after(a.eq(r)),void 0}return r>0&&a.eq(0).before(a.eq(r)),void 0}}o.append('<li><a href="'+t+'" title="'+(i.relevantTip?i.relevantTip.replace("d",1):"")+'">'+n+"</a></li>")},c=function(t){var e=parseInt(t.attr("score"));return e>0?e:1},l=function(t,e){t.attr("score",e),i.relevantTip&&t.attr("title",i.relevantTip.replace("d",e)),i.postScoreClass&&t.attr("class",i.postScoreClass+e)},d=function(){if("#related-posts"!=i.containerSelector){var t=e(i.containerSelector);if(1!=t.length)return;a=e('<div id="related-posts"></div>').appendTo(t)}else a=e(i.containerSelector);if(i.tags||(i.tags=[],e('a[rel="tag"]:lt('+i.maxTags+")").each(function(){var t=e.trim(e(this).text().replace(/\n/g,""));-1==e.inArray(t,i.tags)&&(i.tags[i.tags.length]=t)})),0!=i.tags.length||i.recentTitle)if(0==i.tags.length?e("<h2>"+i.recentTitle+"</h2>").appendTo(a):i.relatedTitle&&e("<h2>"+i.relatedTitle+"</h2>").appendTo(a),i.loadingText&&e('<div id="related-posts-loadingtext">'+i.loadingText+"</div>").appendTo(a),o=e("<ul "+(i.loadingClass?'class="'+i.loadingClass+'"':"")+"></ul>").appendTo(a),0==i.tags.length)e.ajax({url:i.blogURL+"/feeds/posts/summary/",data:{"max-results":i.maxPostsPerTag,alt:"json-in-script"},success:r,dataType:"jsonp",cache:!0});else for(var n=0;n<i.tags.length;n++)e.ajax({url:i.blogURL+"/feeds/posts/summary/",data:{category:i.tags[n],"max-results":i.maxPostsPerTag,alt:"json-in-script"},success:r,dataType:"jsonp",cache:!0})};i.onLoad?e(window).load(d):e(document).ready(d)}(jQuery)}